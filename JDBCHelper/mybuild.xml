<project name="Tomcat" default="help" basedir=".">


  <!-- ==================== Initialization properties ===================== 114.79.130.42 -->
  <property environment="env"/>
  <property name="ant.home" value="${env.ANT_HOME}"/>
  <property name="JAVA_HOME" value="${env.JAVA_HOME}" />
  <property name="build.compiler" value="modern"/>
  <property name="debug" value="on"/>
  <property name="optimize" value="true" />
  <property name="jdbchelper.home" value="./"/>
  <property name="jdbchelper.build" value="./build"/>
  <property name="jdbchelper.dist" value="./dist"/>



  <!-- ======================== Copy static files ========================= -->
  <target name="preparestatic">

    <!-- Create destination directories -->
    <mkdir dir="${jdbchelper.build}"/>
    <mkdir dir="${jdbchelper.build}/classes"/>
    <!-- <mkdir dir="${jdbchelper.build}/properties"/>
    <mkdir dir="${jdbchelper.build}/lib"/>
        
    <copy todir="${jdbchelper.build}/properties">
	<fileset dir="properties">
	      <exclude name="**/*.bak" />
	      <exclude name="**/trash/**" />  
	      <exclude name="**/*.scc" />
	</fileset>
    </copy>
    <copy todir="${jdbchelper.build}/lib">
	<fileset dir="lib">
	      <exclude name="**/*.bak" />
	      <exclude name="**/trash/**" />  
	      <exclude name="**/*.scc" />
	</fileset>
    </copy>
    -->
  </target>

  <!-- ==================== create jdbchelper JAR file ============= -->
  <target name="buildjar" depends="preparestatic,compileall">
    <jar   jarfile="${jdbchelper.build}/jdbchelper.jar"
           basedir="${jdbchelper.build}/classes"
           includes="**" />
  </target>

  <!-- ============================= Compile the jdbchelper java files ========================= -->
  <target name="compileall" >
    <echo message="${env.JAVA_HOME}"/>
    <!-- Compile the cyberoam classes and servlet -->
    <javac srcdir="src" destdir="${jdbchelper.build}/classes"
           classpath="${jdbchelper.home};${jdbchelper.build}/classes;
		      ${jdbchelper.home}/lib/log4j-core.jar;
		      ${jdbchelper.home}/properties;
		      ${env.JAVA_HOME}/jre/lib/rt.jar" 
           debug="${debug}" 
           optimize="${optimize}"
           deprecation="off" >
    </javac>
  </target>

  <!-- ==================== Administrative targets  ======================= -->
  <target name="clean">
	  <delete dir="${jdbchelper.build}/properties"/>
	  <delete>
	    <fileset dir="${jdbchelper.build}" excludes="**/*.gz" />
	  </delete>
  </target>

  <target name="build" depends="preparestatic,compileall,buildjar" />

  
  <!-- =============================== Help =============================== -->
  <target name="help">
    <echo message=""/>
    <echo message="ANT build targets for JDBC Helper"/>
    <echo message=""/>
    <echo message="The following targets are available:"/>
    <echo message="  build			Clean, then create the jdbchelper build"/>
    <echo message="  "/>
    <echo message="  The following options allow to compile and maintain ur code: "/>
    <echo message="  "/>
    <echo message="  compileall			Compile jdbchelper java source files only."/>
    <echo message="  buildjar			Build JDBC helper jar file."/>
    <echo message="  preparestatic		update properties folder"/>
  </target>

</project>
